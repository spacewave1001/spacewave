<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>동탄 파티룸 예약 영수증</title>
  <style>
    button {
      padding: 10px 20px;
      font-size: 16px;
      margin-top: 10px;
    }
    #receiptDisplay {
      border: 1px solid #ccc;
      padding: 10px;
      margin-top: 20px;
      white-space: pre-line; /* Preserves line breaks */
      display: none; /* Initially hide the receipt */
    }
  </style>
</head>
<body>
  <h1>동탄 파티룸 공간 웨이브 예약</h1>
  <h2>✔ 예약 상품 : 동탄 파티룸 공간 웨이브</h2>
  <label>이용일: <input type="date" id="useDate"></label>
  <h2>[💌 결제 정보]</h2>
  <div>
    <h3>기본 금액</h3>
    <label><input type="radio" name="basePrice" value="100000"> 100,000원</label><br>
    <label><input type="radio" name="basePrice" value="140000"> 140,000원</label><br>
    <label><input type="radio" name="basePrice" value="150000"> 150,000원</label><br>
    <label><input type="radio" name="basePrice" value="160000"> 160,000원</label><br>
    <label><input type="radio" name="basePrice" value="170000"> 170,000원</label><br>
    <label><input type="radio" name="basePrice" value="180000"> 180,000원</label><br>
    <label><input type="radio" name="basePrice" value="190000"> 190,000원</label><br>
  </div>
  <div>
    <h3>인원 연장</h3>
    <label><input type="radio" name="extraPerson" value="0"> 없음</label><br>
    <label><input type="radio" name="extraPerson" value="10000"> 10,000원</label><br>
    <label><input type="radio" name="extraPerson" value="20000"> 20,000원</label><br>
    <label><input type="radio" name="extraPerson" value="30000"> 30,000원</label><br>
    <label><input type="radio" name="extraPerson" value="40000"> 40,000원</label><br>
  </div>
  <div>
    <h3>야간 연장</h3>
    <label><input type="radio" name="nightExtension" value="0"> 없음</label><br>
    <label><input type="radio" name="nightExtension" value="50000"> 50,000원</label><br>
    <label><input type="radio" name="nightExtension" value="70000"> 70,000원</label><br>
  </div>
  <div>
    <h3>리뷰 약속 할인</h3>
    <label><input type="radio" name="reviewDiscount" value="0"> 없음</label><br>
    <label><input type="radio" name="reviewDiscount" value="-10000"> 10,000원</label><br>
  </div>
  <div>
    <h3>지인 할인</h3>
    <label><input type="radio" name="friendDiscount" value="0"> 없음</label><br>
    <label><input type="radio" name="friendDiscount" value="-10000"> 10,000원</label><br>
    <label><input type="radio" name="friendDiscount" value="-20000"> 20,000원</label><br>
    <label><input type="radio" name="friendDiscount" value="-30000"> 30,000원</label><br>
    <label><input type="radio" name="friendDiscount" value="-40000"> 40,000원</label><br>
    <label><input type="radio" name="friendDiscount" value="-50000"> 50,000원</label><br>
  </div>
  
  <!-- 버튼 -->
  <button onclick="calculateTotal()">계산하기</button>
  <div>
    <h3>✔ 결제 금액: <span id="totalPayment">0</span>원</h3>
    <h3>✔ 보증금 (2일 이내 환급): 50,000원</h3>
  </div>
  <h2>👉 총 금액: <span id="finalAmount">0</span>원</h2>

  <!-- 영수증 내용 -->
  <div id="receiptDisplay"></div>
  
  <button onclick="copyReceipt()">복사하기</button>
  
  <script>
    const deposit = 50000;

    function calculateTotal() {
      const basePrice = parseInt(document.querySelector('input[name="basePrice"]:checked')?.value || 0);
      const extraPerson = parseInt(document.querySelector('input[name="extraPerson"]:checked')?.value || 0);
      const nightExtension = parseInt(document.querySelector('input[name="nightExtension"]:checked')?.value || 0);
      const reviewDiscount = parseInt(document.querySelector('input[name="reviewDiscount"]:checked')?.value || 0);
      const friendDiscount = parseInt(document.querySelector('input[name="friendDiscount"]:checked')?.value || 0);
      
      const totalPayment = basePrice + extraPerson + nightExtension + reviewDiscount + friendDiscount;
      const finalAmount = totalPayment + deposit;
      
      document.getElementById("totalPayment").textContent = totalPayment.toLocaleString();
      document.getElementById("finalAmount").textContent = finalAmount.toLocaleString();
      
      updateReceipt(basePrice, extraPerson, nightExtension, reviewDiscount, friendDiscount, totalPayment, finalAmount);
    }

    function updateReceipt(basePrice, extraPerson, nightExtension, reviewDiscount, friendDiscount, totalPayment, finalAmount) {
      const dateInput = document.getElementById("useDate").value;
      let useDate = '';
      if (dateInput) {
        const date = new Date(dateInput);
        const options = { year: 'numeric', month: 'numeric', day: 'numeric', weekday: 'short' };
        useDate = date.toLocaleDateString('ko-KR', options);
      }
      
      let receiptText = `안녕하세요? 동탄 공간 웨이브를 찾아주셔서 감사합니다.\n\n`;
      receiptText += `✔ 예약 상품 : 동탄 파티룸 공간 웨이브\n`;
      receiptText += `✔ 이용일 : ${useDate}\n\n`;
      receiptText += `[💌 결제 정보]\n`;
      receiptText += `+ 기본 금액 : ${basePrice.toLocaleString()}원\n`;
      receiptText += `+ 인원 연장 : ${extraPerson.toLocaleString()}원\n`;
      receiptText += `+ 야간 연장 : ${nightExtension.toLocaleString()}원\n`;
      receiptText += `- 리뷰 약속 할인 : ${Math.abs(reviewDiscount).toLocaleString()}원\n`;
      if (friendDiscount !== 0) {
        receiptText += `- 지인 할인 : ${Math.abs(friendDiscount).toLocaleString()}원\n`;
      }
      receiptText += `\n✔ 결제 금액 : ${totalPayment.toLocaleString()}원\n`;
      receiptText += `✔ 보증금 (2일 이내 환급) : 50,000원\n\n`;
      receiptText += `👉 총 금액 : ${finalAmount.toLocaleString()}원\n`;
      receiptText += `국민은행 601501-01-483138 이*희로 입금해 주세요.\n`;
      receiptText += `내일 정오 12시까지 입금하지 않을 시, 예약이 취소됩니다.\n\n`;
      receiptText += `* 현금영수증 발행이 필요하신가요?\n`;
      receiptText += `이용일 이후 2일 이내 현금영수증을 발행해 드립니다.\n`;
      receiptText += `현금영수증을 발행할 휴대폰 번호 등을 문자로 알려주세요.\n\n`;
      receiptText += `[🎫 적립]\n`;
      receiptText += `10번 방문 시, 11번째 방문에 50%를 할인해드립니다.\n`;
      receiptText += `적립은 예약 대표자분 1분의 이름으로만 가능합니다.`;
      
      document.getElementById("receiptDisplay").innerText = receiptText; // Display receipt
      document.getElementById("receiptDisplay").style.display = 'block'; // Show the receipt
    }

    function copyReceipt() {
      const receiptText = document.getElementById("receiptDisplay").innerText;
      navigator.clipboard.writeText(receiptText).then(() => {
        alert("영수증이 클립보드에 복사되었습니다!");
      });
    }
  </script>
</body>
</html>
